---
title: Service Registry
description: Mapping C# logic to user-facing integrations and managing provider capabilities.
---

import { Plug, Code, Database, Layers, RefreshCw } from 'lucide-react';
import { Step, Steps } from 'fumadocs-ui/components/steps';

Iqra AI uses a **Dynamic Factory Pattern** to load integrations. This means the frontend dashboard is not hardcoded with "OpenAI" or "Twilio". Instead, it reads available providers from the database.

As a Platform Owner, you must register these providers in the **Service Registry** so users can select them.

## The Hierarchy

```mermaid
graph LR
    Code[C# Class: OpenAILLMService]
    DB_Service[DB Service: OpenAI LLM]
    DB_Integ[DB Integration: OpenAI]
    UI[User UI: Dropdown]

    Code -.->|Matches Key| DB_Service
    DB_Service -->|Belongs To| DB_Integ
    DB_Integ -->|Displayed As| UI
    
    style Code fill:#000,stroke:#333,stroke-width:2px,color:#fff
    style DB_Service fill:#16a34a,stroke:#333,stroke-width:2px,color:#fff
    style DB_Integ fill:#2563eb,stroke:#333,stroke-width:2px,color:#fff
```

## 1. Integration Types
**The "Provider" Container.**

This represents the company or entity (e.g., "OpenAI", "Twilio").

1.  Navigate to **Admin Dashboard** -> **Integrations**.
2.  **Create/Edit:**
    *   **Name:** Display name (e.g., "OpenAI").
    *   **Logo:** URL to the icon.
    *   **Tags:** Capabilities (e.g., `LLM`, `TTS`). This filters where it appears in the User Dashboard.
    *   **Configuration Fields:** Define what secrets the user needs to provide (e.g., `ApiKey`, `Region`).

## 2. Integration Services
**The "Capability" Logic.**

This represents a specific function that provider offers (e.g., "OpenAI Chat Completion" or "ElevenLabs Speech Synthesis"). **This is where you bind the database to the code.**

1.  Navigate to **Admin Dashboard** -> **Services**.
2.  **Create/Edit:**
    *   **Name:** Internal name (e.g., "OpenAI LLM").
    *   **Integration:** Link it to the "OpenAI" Integration you created above.
    *   **Service Type:** `LLM`, `TTS`, `STT`, `Rerank`, etc.
    *   **Service Key (CRITICAL):** This string **MUST** match the `ServiceKey` defined in the C# class implementation.

### Finding the Service Key
If you are a developer or self-hoster, look into the `IqraInfrastructure` source code.

```csharp title="IqraInfrastructure/Managers/LLM/Providers/OpenAILLMService.cs"
public class OpenAILLMService : ILLMService
{
    // [!code highlight]
    public string ServiceKey => "OpenAILLMService"; 
    // You must paste "OpenAILLMService" into the Admin Dashboard
}
```

<Callout type="error" title="Mismatch Risk">
  If the **Service Key** in the dashboard does not match the C# code exactly (case-sensitive), the system will throw a `ServiceNotFoundException` when a call attempts to load that provider.
</Callout>

## 3. Models & Options

Once a Service is linked, you can define the specific models it supports. This populates the dropdowns in the Agent Studio.

*   **Models:** `gpt-4`, `gpt-4o`, `eleven_turbo_v2`.
*   **Cost:** You can define the internal cost per token/minute here for usage tracking.

## Syncing (SaaS)

If you are using the **Iqra Cloud** version, these definitions are managed by us. If you are **Self-Hosting**, you are responsible for maintaining this registry.

*   **Scenario:** OpenAI releases `gpt-5`.
*   **Action:** You simply go to **Services** -> **OpenAI LLM** -> **Models** and add `gpt-5`. No code deployment required!